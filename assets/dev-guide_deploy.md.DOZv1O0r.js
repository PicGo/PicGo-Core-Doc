import{_ as i,c as a,o as n,ag as p}from"./chunks/framework.Cjll1ph3.js";const d=JSON.parse('{"title":"插件测试与发布","description":"","frontmatter":{},"headers":[],"relativePath":"dev-guide/deploy.md","filePath":"dev-guide/deploy.md"}'),e={name:"dev-guide/deploy.md"};function l(t,s,h,k,o,c){return n(),a("div",null,[...s[0]||(s[0]=[p(`<h1 id="插件测试与发布" tabindex="-1">插件测试与发布 <a class="header-anchor" href="#插件测试与发布" aria-label="Permalink to &quot;插件测试与发布&quot;">​</a></h1><h2 id="插件测试" tabindex="-1">插件测试 <a class="header-anchor" href="#插件测试" aria-label="Permalink to &quot;插件测试&quot;">​</a></h2><h3 id="普通插件" tabindex="-1">普通插件 <a class="header-anchor" href="#普通插件" aria-label="Permalink to &quot;普通插件&quot;">​</a></h3><p>首先确保你全局安装了<code>picgo</code>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> picgo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> picgo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span></span></code></pre></div><p><strong>然后运行一下<code>picgo -h</code>看看是否安装成功。（这步是必须的，因为第一次安装需要先运行一下，然后picgo会创建默认的配置文件和生成package.json等初始化操作）</strong></p><p>然后将你所写的插件的文件夹放到picgo<a href="/PicGo-Core-Doc/guide/config.html#默认配置文件">默认的配置文件</a>所在的目录里。<strong>注意插件文件夹名字必须以<code>picgo-plugin-</code>作为前缀，否则安装的时候picgo将不会读取。</strong></p><p>然后在picgo默认配置文件所在的目录下，输入：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./picgo-plugin-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-plugin-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>这样就能将你的插件安装到picgo所在的配置文件夹内，picgo在运行的时候也能读取了。之后可以根据你的开发需要，修改你的插件内容，并运行picgo相应的命令查看效果和测试。</p><h3 id="gui插件" tabindex="-1">GUI插件 <a class="header-anchor" href="#gui插件" aria-label="Permalink to &quot;GUI插件&quot;">​</a></h3><p>如果你想要开发一个GUI插件，那么你首先要去下载一下<a href="https://github.com/Molunerfinn/PicGo/releases" target="_blank" rel="noreferrer">PicGo</a>并安装。安装完毕后请打开软件，第一次运行将初始化配置。</p><p><strong>如果你使用 PicGo 2.3.0+ 版本，可以直接使用插件导入功能，选择你所开发的picgo插件目录即可：</strong></p><p><img src="https://pic.molunerfinn.com/picgo/docs/202108282004729.png" alt=""></p><p>否则参考如下：</p><p>electron版的PicGo配置文件的路径在不同的系统里是不同的：</p><ul><li>Windows: <code>%APPDATA%\\picgo\\data.json</code></li><li>Linux: <code>$XDG_CONFIG_HOME/picgo/data.json</code> or <code>~/.config/picgo/data.json</code></li><li>macOS: <code>~/Library/Application\\ Support/picgo/data.json</code></li></ul><p>举例，在windows里你可以在：</p><p><code>C:\\Users\\你的用户名\\AppData\\Roaming\\picgo\\data.json</code>找到它。</p><p>在linux里你可以在：</p><p><code>~/.config/picgo/data.json</code>里找到它。</p><p>macOS同理。</p><p>此时你的插件目录比如在 <code>/usr/home/picgo-plugin-&lt;your-plugin-name&gt;</code>里，</p><p>在PicGo默认配置文件所在的目录下，输入：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/home/picgo-plugin-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-plugin-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>这样就能将你的插件安装到PicGo所在的配置文件夹内，PicGo在运行的时候也能读取了。</p><div class="warning custom-block"><p class="custom-block-title">注意</p><p>GUI插件的任何修改都需要 <strong>重启</strong> PicGo才能生效，重启不代表关闭主窗口再重新打开，而是 <strong>完全退出</strong> 整个PicGo的进程，然后再打开PicGo才能看到效果。主要原因是底层依赖了Node.js的<code>require</code>来加载插件，所以有运行时的缓存。PicGo在 <code>2.0.2</code> 版本开始，可以通过右键菜单栏图标或者Mini窗口找到「重启应用」的按钮来快速重启应用。</p></div><h2 id="插件发布" tabindex="-1">插件发布 <a class="header-anchor" href="#插件发布" aria-label="Permalink to &quot;插件发布&quot;">​</a></h2><p>为了让一个插件能够被其它人使用，你必须遵循<code>picgo-plugin-&lt;name&gt;</code>的命名约定将其发布到npm上。插件遵循命名约定之后就可以：</p><ul><li>被其他用户搜索到。</li><li>通过<code>picgo install &lt;name&gt;</code>或者<code>picgo add &lt;name&gt;</code>来安装。</li></ul><p>比如你发布了一个叫做<code>picgo-plugin-wow</code>的插件，那么用户可以通过<code>picgo install wow</code>来安装。</p><p>PicGo的官方插件，你可以在PicGo的<a href="https://github.com/PicGo" target="_blank" rel="noreferrer">GitHub主页</a>找到。</p><h3 id="gui插件-1" tabindex="-1">GUI插件 <a class="header-anchor" href="#gui插件-1" aria-label="Permalink to &quot;GUI插件&quot;">​</a></h3><p>如果你的插件不是专门针对GUI进行优化的（比如添加了guiMenu等），那么在electron版本的PicGo上安装的时候会有如下提示信息：</p><p><img src="https://pic.molunerfinn.com/picgo/docs/5c39ce32045a7.png" alt=""></p><p>并且如果未对GUI进行优化的插件，会在右上角显示一个<code>CLI</code>的标志：</p><p><img src="https://pic.molunerfinn.com/picgo/docs/5c39ce678a412.png" alt=""></p><p>如果你想要你的插件在<a href="https://github.com/Molunerfinn/PicGo" target="_blank" rel="noreferrer">PicGo</a>软件上显示出图标、简介等信息，请遵循以下要求：</p><ul><li>在npm包的根目录里放置一张<code>logo.png</code>，否则将会显示<code>PicGo</code>的默认LOGO。</li><li>在<code>package.json</code>里增加<code>description</code>字段用于介绍你的插件以及<code>homepage</code>字段用于指向你的插件的主页地址。</li><li>在<code>package.json</code>的<code>keywords</code>里添加<code>&quot;picgo-gui-plugin&quot;</code>用于告诉用户你的插件已经针对PicGo软件进行了优化。</li></ul><p>示例：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;This is a picgo plugin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;homepage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://github.com/XXX/XXX#readme&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;keywords&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;picgo-gui-plugin&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>如果你有<code>Uploader</code>或者<code>Transformer</code>，你需要将它们在插件的主入口文件中指明出来，以便PicGo能定位到它们：</li></ul><p>示例：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> register</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ctx.helper.uploader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ctx.helper.transformer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  return {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    register,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    uploader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;- 指明你的Uploader的name</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    transformer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // &lt;- 指明你的Transformer的name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="提交awesome-picgo" tabindex="-1">提交Awesome-PicGo <a class="header-anchor" href="#提交awesome-picgo" aria-label="Permalink to &quot;提交Awesome-PicGo&quot;">​</a></h3><p>为了让你的插件可以被更多人知道，在你发布完插件之后，可以向<a href="https://github.com/PicGo/Awesome-PicGo" target="_blank" rel="noreferrer">Awesome-PicGo</a>项目提交一份PR，把你的优秀项目添加到Awesome-list里！</p><p>注意添加之前看看<a href="https://github.com/PicGo/Awesome-PicGo/blob/master/CONTRIBUTING.md" target="_blank" rel="noreferrer">CONTRIBUTING</a>是否符合添加要求</p>`,47)])])}const g=i(e,[["render",l]]);export{d as __pageData,g as default};
