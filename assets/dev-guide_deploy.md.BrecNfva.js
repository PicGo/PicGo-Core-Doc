import{_ as s,c as a,o as n,ag as e}from"./chunks/framework.Cjll1ph3.js";const k=JSON.parse('{"title":"Testing & Publishing Plugins","description":"","frontmatter":{},"headers":[],"relativePath":"dev-guide/deploy.md","filePath":"dev-guide/deploy.md"}'),t={name:"dev-guide/deploy.md"};function l(p,i,h,o,r,d){return n(),a("div",null,[...i[0]||(i[0]=[e(`<h1 id="testing-publishing-plugins" tabindex="-1">Testing &amp; Publishing Plugins <a class="header-anchor" href="#testing-publishing-plugins" aria-label="Permalink to &quot;Testing &amp; Publishing Plugins&quot;">​</a></h1><h2 id="testing-plugins" tabindex="-1">Testing plugins <a class="header-anchor" href="#testing-plugins" aria-label="Permalink to &quot;Testing plugins&quot;">​</a></h2><h3 id="regular-cli-plugins" tabindex="-1">Regular (CLI) plugins <a class="header-anchor" href="#regular-cli-plugins" aria-label="Permalink to &quot;Regular (CLI) plugins&quot;">​</a></h3><p>First, make sure you have <code>picgo</code> installed globally:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> picgo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> picgo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span></span></code></pre></div><p><strong>Then run <code>picgo -h</code> to confirm the installation works. (This is required: on the first run PicGo initializes by creating the default config file and generating <code>package.json</code>, etc.)</strong></p><p>Next, place your plugin folder under the directory where PicGo’s <a href="/PicGo-Core-Doc/guide/config.html#default-config-file">default config file</a> lives. <strong>The plugin folder name must start with <code>picgo-plugin-</code>, otherwise PicGo won’t load it.</strong></p><p>Then, in the same directory as the default config file, run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./picgo-plugin-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-plugin-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>This installs your plugin into PicGo’s config directory so PicGo can load it at runtime. After that, iterate on your plugin and run PicGo commands to test.</p><h3 id="gui-plugins" tabindex="-1">GUI plugins <a class="header-anchor" href="#gui-plugins" aria-label="Permalink to &quot;GUI plugins&quot;">​</a></h3><p>If you want to develop a GUI plugin, first download and install <a href="https://github.com/Molunerfinn/PicGo/releases" target="_blank" rel="noreferrer">PicGo</a>. On first launch, the app will initialize its configuration.</p><p><strong>If you’re using PicGo 2.3.0+, you can use the plugin import feature and select your plugin directory directly:</strong></p><p><img src="https://pic.molunerfinn.com/picgo/docs/202108282004729.png" alt=""></p><p>Otherwise:</p><p>The PicGo (Electron) config file path differs by OS:</p><ul><li>Windows: <code>%APPDATA%\\picgo\\data.json</code></li><li>Linux: <code>$XDG_CONFIG_HOME/picgo/data.json</code> or <code>~/.config/picgo/data.json</code></li><li>macOS: <code>~/Library/Application\\ Support/picgo/data.json</code></li></ul><p>For example, on Windows you can find it at:</p><p><code>C:\\Users\\&lt;your-username&gt;\\AppData\\Roaming\\picgo\\data.json</code>.</p><p>On Linux you can find it at:</p><p><code>~/.config/picgo/data.json</code>.</p><p>Same idea on macOS.</p><p>Assume your plugin directory is <code>/usr/home/picgo-plugin-&lt;your-plugin-name&gt;</code>.</p><p>In the directory where PicGo’s config lives, run:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/home/picgo-plugin-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-plugin-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>This installs your plugin into PicGo’s config directory so PicGo can load it.</p><div class="warning custom-block"><p class="custom-block-title">Note</p><p>Any change to a GUI plugin requires restarting PicGo to take effect. “Restart” does not mean closing and reopening the main window—you must <strong>fully quit</strong> the PicGo process and then launch it again.</p><p>This is because PicGo loads plugins via Node.js <code>require()</code>, which caches modules at runtime. Since PicGo <code>2.0.2</code>, you can use the tray icon menu or the mini window’s “Restart App” button to restart quickly.</p></div><h2 id="publishing-plugins" tabindex="-1">Publishing plugins <a class="header-anchor" href="#publishing-plugins" aria-label="Permalink to &quot;Publishing plugins&quot;">​</a></h2><p>To make your plugin usable by others, publish it to npm following the naming convention <code>picgo-plugin-&lt;name&gt;</code>. Once you follow the convention, your plugin can:</p><ul><li>Be discovered by other users.</li><li>Be installed via <code>picgo install &lt;name&gt;</code> or <code>picgo add &lt;name&gt;</code>.</li></ul><p>For example, if you publish <code>picgo-plugin-wow</code>, users can install it via <code>picgo install wow</code>.</p><p>You can find official PicGo plugins on PicGo’s <a href="https://github.com/PicGo" target="_blank" rel="noreferrer">GitHub org page</a>.</p><h3 id="gui-plugins-1" tabindex="-1">GUI plugins <a class="header-anchor" href="#gui-plugins-1" aria-label="Permalink to &quot;GUI plugins&quot;">​</a></h3><p>If your plugin is not optimized for the GUI (for example, it doesn’t implement <code>guiMenu</code>), PicGo (Electron) will show a prompt like this during installation:</p><p><img src="https://pic.molunerfinn.com/picgo/docs/5c39ce32045a7.png" alt=""></p><p>Plugins that are not optimized for the GUI will show a <code>CLI</code> badge in the top-right:</p><p><img src="https://pic.molunerfinn.com/picgo/docs/5c39ce678a412.png" alt=""></p><p>If you want your plugin to display an icon and description inside the <a href="https://github.com/Molunerfinn/PicGo" target="_blank" rel="noreferrer">PicGo</a> app, follow these requirements:</p><ul><li>Put a <code>logo.png</code> at the npm package root, otherwise PicGo will show the default logo.</li><li>Add <code>description</code> and <code>homepage</code> fields to <code>package.json</code>.</li><li>Add <code>&quot;picgo-gui-plugin&quot;</code> to <code>package.json.keywords</code> to indicate your plugin is optimized for the PicGo GUI.</li></ul><p>Example:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;This is a picgo plugin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;homepage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://github.com/XXX/XXX#readme&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;keywords&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;picgo-gui-plugin&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>If your plugin provides an <code>Uploader</code> or a <code>Transformer</code>, you should declare them in the plugin entry file so PicGo can locate them:</li></ul><p>Example:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> register</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ctx.helper.uploader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ctx.helper.transformer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  return {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    register,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    uploader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;- declare your uploader name</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    transformer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // &lt;- declare your transformer name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="submitting-to-awesome-picgo" tabindex="-1">Submitting to Awesome-PicGo <a class="header-anchor" href="#submitting-to-awesome-picgo" aria-label="Permalink to &quot;Submitting to Awesome-PicGo&quot;">​</a></h3><p>To help more people discover your plugin, you can submit a PR to <a href="https://github.com/PicGo/Awesome-PicGo" target="_blank" rel="noreferrer">Awesome-PicGo</a> after publishing and add your project to the awesome list.</p><p>Before submitting, make sure you comply with the requirements in <a href="https://github.com/PicGo/Awesome-PicGo/blob/master/CONTRIBUTING.md" target="_blank" rel="noreferrer">CONTRIBUTING</a>.</p>`,47)])])}const g=s(t,[["render",l]]);export{k as __pageData,g as default};
